<!DOCTYPE html>
<html>
<head>
    <title>Your Events</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-dark text-light">

<div class="container mt-5">

<h1 class="text-center mb-4">ðŸŽ¯ Your Organized Events</h1>

<div class="card shadow-lg border-0">
<div class="card-body bg-secondary rounded">

<table class="table table-dark table-hover align-middle text-center">

<thead>
<tr>
<th>Title</th>
<th>Date</th>
<th>Location</th>
<th>Students</th>
<th>Actions</th>
</tr>
</thead>

<tbody>

{% for event in events %}
<tr class="{% if event[5] == 1 %}table-secondary{% endif %}">

<td>{{ event[1] }}</td>
<td>{{ event[2] }}</td>
<td>{{ event[3] }}</td>

<td>
<span class="badge bg-success">
{{ event[4] }} Registered
</span>
</td>

<td>
    <div class="d-flex flex-wrap gap-2 justify-content-center">

<a href="{{ url_for('auth.edit_event', event_id=event[0]) }}"
class="btn btn-warning btn-sm">Edit</a>

<a href="{{ url_for('auth.delete_event', event_id=event[0]) }}"
class="btn btn-danger btn-sm"
onclick="return confirm('Are you sure?');">
Delete
</a>

<a href="{{ url_for('auth.view_registrations', event_id=event[0]) }}"
class="btn btn-info btn-sm">
View Students
</a>

<a href="/download-participants/{{ event[0] }}"
class="btn btn-success btn-sm">
Download CSV
</a>

<!-- â­ CLOSE EVENT BUTTON -->

{% if event[5] == 1 %}

    <span class="badge bg-danger">
        ðŸ”’ Registration Closed
    </span>

    <a href="/toggle-registration/{{ event[0] }}"
       class="btn btn-success btn-sm">
        Reopen
    </a>

{% else %}

    <span class="badge bg-success">
        ðŸŸ¢ Open
    </span>

    <a href="/toggle-registration/{{ event[0] }}"
       class="btn btn-outline-danger btn-sm">
        Close
    </a>

{% endif %}
    </div>
</td>
</tr>
{% endfor %}

</tbody>
</table>

</div>
</div>

<div class="text-center mt-4">

<a href="/organizer/dashboard" class="btn btn-light">
â¬… Back to Dashboard
</a>

<a href="/create-event" class="btn btn-success">
âž• Create Another Event
</a>

</div>

</div>

</body>
</html>