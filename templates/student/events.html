<!DOCTYPE html>
<html>
<head>
    <title>Available Events</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          rel="stylesheet">
</head>

<body class="bg-light">

<div class="container mt-5">

    <h1 class="mb-4 text-center">Available Events</h1>
    <form method="GET" action="" class="mb-4">
    <div class="input-group">

        <input 
            type="text"
            name="search"
            class="form-control form-control-lg"
            placeholder="ðŸ” Search by title or location..."
            value="{{ request.args.get('search','') }}"
        >

        <button class="btn btn-primary btn-lg">
            Search
        </button>

    </div>
</form>

    <div class="row">

        {% for event in events %}

        <div class="col-md-4">
            <div class="card shadow-lg mb-4">

                <div class="card-body">

                    <h4>{{ event[1] }}</h4>

                    <p>{{ event[2] }}</p>

                    <p><strong>Date:</strong> {{ event[3] }}</p>

                    <p><strong>Location:</strong> {{ event[4] }}</p>

                    <p><strong>Seats Left:</strong> {{ event[-1] }}</p>

                    
                    <!-- âœ… SMART BUTTON LOGIC -->
                    
                    {% if event[7] == 1 %}
    
    <a href="/cancel-registration/{{ event[0] }}"
       class="btn btn-danger w-100">
       Cancel Registration
    </a>

{% elif event[-1] == 0 %}

    <button class="btn btn-secondary w-100" disabled>
        Event Full
    </button>

{% else %}

    <a href="/register-event/{{ event[0] }}"
       class="btn btn-primary w-100">
       Register
    </a>

{% endif %}

                </div>

            </div>
        </div>

        {% endfor %}

    </div>

</div>

</body>
</html>